# ç”µä¿¡å¥—é¤æŸ¥è¯¢æ ¼å¼åŒ–æœåŠ¡ v2.0

[![Deno Deploy](https://img.shields.io/badge/Deno-Deploy-brightgreen?logo=deno)](https://deno.com/deploy)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue?logo=typescript)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

> ğŸš€ åŸºäº Deno çš„æ™ºèƒ½ç”µä¿¡å¥—é¤æŸ¥è¯¢ç³»ç»Ÿï¼Œæ”¯æŒå¤šç”¨æˆ·ç®¡ç†ã€å®æ—¶ç›‘æ§ã€æœºå™¨äººé€šçŸ¥é›†æˆ

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#-é¡¹ç›®æ¦‚è¿°)
- [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)  
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [API æ¥å£æ–‡æ¡£](#-api-æ¥å£æ–‡æ¡£)
- [ä½¿ç”¨ç¤ºä¾‹](#-ä½¿ç”¨ç¤ºä¾‹)
- [é«˜çº§é…ç½®](#-é«˜çº§é…ç½®)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

ç”µä¿¡å¥—é¤æŸ¥è¯¢æ ¼å¼åŒ–æœåŠ¡æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ç”µä¿¡æ•°æ®ç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œæä¾›ï¼š

- **ğŸ” æ™ºèƒ½æŸ¥è¯¢** - å®æ—¶è·å–ç”µä¿¡å¥—é¤ã€æµé‡ã€ä½™é¢ç­‰ä¿¡æ¯
- **ğŸ“Š ç¾è§‚å±•ç¤º** - è¿›åº¦æ¡å¯è§†åŒ–ã€æ™ºèƒ½æé†’ã€æ•°æ®åˆ†æ
- **ğŸ¤– è‡ªåŠ¨é€šçŸ¥** - æ”¯æŒé’‰é’‰ã€Telegramæœºå™¨äººæ¨é€
- **ğŸ”„ å¤šç”¨æˆ·ç®¡ç†** - åŒæ—¶ç›‘æ§å¤šä¸ªæ‰‹æœºå·
- **âš¡ é«˜æ€§èƒ½** - æ™ºèƒ½ç¼“å­˜ã€å¹¶å‘æŸ¥è¯¢ã€APIä¼˜åŒ–

### é€‚ç”¨åœºæ™¯

- **ä¸ªäººç›‘æ§** - æ—¥å¸¸æŸ¥çœ‹å¥—é¤ä½¿ç”¨æƒ…å†µ
- **å®¶åº­ç®¡ç†** - ç»Ÿä¸€ç®¡ç†å®¶åº­æˆå‘˜çš„æ‰‹æœºå¥—é¤
- **ä¼ä¸šç›‘æ§** - æ‰¹é‡ç›‘æ§å…¬å¸æ‰‹æœºå·ä½¿ç”¨æƒ…å†µ
- **è‡ªåŠ¨åŒ–è¿ç»´** - é›†æˆåˆ°ç›‘æ§ç³»ç»Ÿï¼Œè‡ªåŠ¨æŠ¥è­¦

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¨ ç”¨æˆ·ä½“éªŒ
- **ç°ä»£åŒ–ç•Œé¢** - å“åº”å¼è®¾è®¡ï¼Œæ¸å˜èƒŒæ™¯ï¼Œæ¯›ç»ç’ƒæ•ˆæœ
- **æ™ºèƒ½äº¤äº’** - ç”¨æˆ·åˆ‡æ¢å™¨ï¼Œå¿«æ·æ“ä½œï¼Œè‡ªåŠ¨åˆ·æ–°
- **æ•°æ®å¯è§†åŒ–** - è¿›åº¦æ¡æ˜¾ç¤ºï¼ŒçŠ¶æ€å›¾æ ‡ï¼Œè¶‹åŠ¿åˆ†æ
- **éšç§ä¿æŠ¤** - æ‰‹æœºå·è„±æ•æ˜¾ç¤ºï¼Œå®‰å…¨è®¤è¯

### ğŸ“± æŸ¥è¯¢åŠŸèƒ½  
- **åŸºç¡€æŸ¥è¯¢** - ä½™é¢ã€æµé‡ã€é€šè¯æ—¶é•¿ç­‰æ ¸å¿ƒä¿¡æ¯
- **å¢å¼ºæŸ¥è¯¢** - æµé‡åŒ…è¯¦æƒ…ã€ä½¿ç”¨åˆ†æã€æ™ºèƒ½æé†’
- **å®æ—¶æ›´æ–°** - å¼ºåˆ¶åˆ·æ–°ï¼Œç¼“å­˜ç®¡ç†ï¼Œæ•°æ®åŒæ­¥
- **å¤šæ ¼å¼è¾“å‡º** - HTMLé¡µé¢ã€JSONæ•°æ®ã€æ ¼å¼åŒ–æ–‡æœ¬

### ğŸ¤– é€šçŸ¥é›†æˆ
- **é’‰é’‰æœºå™¨äºº** - Webhookæ¨é€ï¼ŒMarkdownæ ¼å¼æ”¯æŒ
- **Telegram Bot** - é¢‘é“/ç¾¤ç»„å‘é€ï¼Œå¤šç§è§£ææ¨¡å¼
- **æ™ºèƒ½æ ¼å¼åŒ–** - å¹³å°ä¼˜åŒ–ï¼Œè‡ªåŠ¨é€‚é…ï¼Œæ—¶é—´æˆ³
- **æ‰¹é‡å‘é€** - ä¸€é”®å¤šå¹³å°ï¼ŒçŠ¶æ€åé¦ˆï¼Œé”™è¯¯å¤„ç†

### ğŸ”§ æŠ€æœ¯ç‰¹æ€§
- **é«˜å¯ç”¨** - å®¹é”™å¤„ç†ï¼Œä¼˜é›…é™çº§ï¼ŒçŠ¶æ€ç›‘æ§
- **é«˜æ€§èƒ½** - æ™ºèƒ½ç¼“å­˜ï¼Œå¹¶å‘æŸ¥è¯¢ï¼Œèµ„æºä¼˜åŒ–
- **å®‰å…¨æ€§** - ç¯å¢ƒå˜é‡é…ç½®ï¼ŒSessionè®¤è¯ï¼Œæ•°æ®åŠ å¯†
- **æ‰©å±•æ€§** - æ¨¡å—åŒ–è®¾è®¡ï¼ŒRESTful APIï¼Œæ˜“äºé›†æˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šåœ¨çº¿ä½“éªŒ (æ¨è)

1. **è®¿é—®æ¼”ç¤ºç«™ç‚¹**
   ```
   https://199.deno.dev
   ```

2. **é…ç½®æ‰‹æœºå·** (å¯é€‰)
   - å¦‚éœ€æŸ¥çœ‹è‡ªå·±çš„æ•°æ®ï¼Œè¯·Forké¡¹ç›®å¹¶éƒ¨ç½²

### æ–¹å¼äºŒï¼šä¸€é”®éƒ¨ç½²

1. **Fork æœ¬ä»“åº“**
   
2. **éƒ¨ç½²åˆ° Deno Deploy**
   - è®¿é—® [Deno Deploy](https://deno.com/deploy)
   - è¿æ¥ GitHub ä»“åº“
   - é€‰æ‹© `main.ts` ä½œä¸ºå…¥å£æ–‡ä»¶

3. **è®¾ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # å¿…éœ€é…ç½®
   TELECOM_PHONENUM=199****1016,138****5678
   TELECOM_PASSWORD=123456,234567
   
   # å¯é€‰é…ç½®  
   WEB_PASSWORD=your_web_password
   ```

4. **è®¿é—®æœåŠ¡**
   ```
   https://your-project.deno.dev
   ```

### æ–¹å¼ä¸‰ï¼šæœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/telecom-formatter.git
cd telecom-formatter

# è®¾ç½®ç¯å¢ƒå˜é‡
export TELECOM_PHONENUM="199****1016"
export TELECOM_PASSWORD="123456"

# å¯åŠ¨æœåŠ¡
deno run --allow-all main.ts
```

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒå˜é‡é…ç½®

| å˜é‡å | å¿…éœ€ | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|
| **åŸºç¡€é…ç½®** |
| `TELECOM_PHONENUM` | âœ… | æ‰‹æœºå·åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ | `199****1016,138****5678` |
| `TELECOM_PASSWORD` | âœ… | å¯¹åº”å¯†ç åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ | `123456,234567` |
| `WEB_PASSWORD` | âŒ | ç½‘é¡µè®¿é—®å¯†ç  | `admin123` |
| **æ€§èƒ½é…ç½®** |
| `API_BASE` | âŒ | åç«¯APIåœ°å€ | `https://dx.ll.sd` |
| `CACHE_TIME` | âŒ | ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰ | `120` |
| **é€šçŸ¥é…ç½®** |
| `DINGTALK_WEBHOOK` | âŒ | é’‰é’‰ç¾¤æœºå™¨äººWebhook | `https://oapi.dingtalk.com/robot/send?access_token=xxx` |
| `TELEGRAM_BOT_TOKEN` | âŒ | Telegramæœºå™¨äººToken | `1234567890:ABCDefGhiJklMnoPqrStUvWxYz` |
| `TELEGRAM_CHAT_ID` | âŒ | Telegramé»˜è®¤èŠå¤©ID | `@your_channel` æˆ– `-1001234567890` |

### Deno Deploy éƒ¨ç½²æ­¥éª¤

1. **å‡†å¤‡ä»£ç ä»“åº“**
   ```bash
   git clone https://github.com/your-username/telecom-formatter.git
   git add .
   git commit -m "éƒ¨ç½²é…ç½®"
   git push origin main
   ```

2. **åˆ›å»º Deno Deploy é¡¹ç›®**
   - ç™»å½• [Deno Deploy](https://deno.com/deploy)
   - ç‚¹å‡» "New Project"
   - é€‰æ‹© GitHub ä»“åº“
   - å…¥å£æ–‡ä»¶ï¼š`main.ts`

3. **é…ç½®ç¯å¢ƒå˜é‡**
   - è¿›å…¥é¡¹ç›®è®¾ç½® â†’ Environment Variables
   - æ·»åŠ ä¸Šè¡¨ä¸­çš„å¿…éœ€å˜é‡
   - ä¿å­˜å¹¶é‡æ–°éƒ¨ç½²

4. **éªŒè¯éƒ¨ç½²**
   ```bash
   curl https://your-project.deno.dev/status
   ```

### å…¶ä»–å¹³å°éƒ¨ç½²

<details>
<summary>Cloudflare Workers</summary>

1. å®‰è£… Wrangler CLI
2. ä¿®æ”¹ `wrangler.toml` é…ç½®
3. æ‰§è¡Œ `wrangler publish`

</details>

<details>
<summary>Docker éƒ¨ç½²</summary>

```dockerfile
FROM denoland/deno:1.40.0
WORKDIR /app
COPY . .
RUN deno cache main.ts
EXPOSE 8000
CMD ["deno", "run", "--allow-all", "main.ts"]
```

</details>

## ğŸ“¡ API æ¥å£æ–‡æ¡£

### æ¥å£æ¦‚è§ˆ

| ç±»åˆ« | ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|------|
| **ç½‘é¡µç«¯ç‚¹** | `/` | GET | ä¸»é¡µé¢ |
| | `/query` | GET | åŸºç¡€æŸ¥è¯¢é¡µé¢ |
| | `/enhanced` | GET | å¢å¼ºæŸ¥è¯¢é¡µé¢ |
| | `/json` | GET | JSONæ•°æ®é¡µé¢ |
| **ç®¡ç†ç«¯ç‚¹** | `/status` | GET | ç³»ç»ŸçŠ¶æ€ |
| | `/clear-cache` | GET/POST | æ¸…é™¤ç¼“å­˜ |
| **APIç«¯ç‚¹** | `/api/bot` | POST | æœºå™¨äººé›†æˆæ¥å£ |
| | `/api/query` | POST | æ ¼å¼åŒ–æŸ¥è¯¢æ¥å£ |
| | `/api/login` | POST | ç”¨æˆ·ç™»å½•æ¥å£ |
| **åŸå§‹API** | `/api/qryImportantData` | POST | å¥—é¤è¯¦ç»†ä¿¡æ¯ |
| | `/api/userFluxPackage` | POST | æµé‡åŒ…æŸ¥è¯¢ |
| | `/api/qryShareUsage` | POST | å…±äº«æµé‡æŸ¥è¯¢ |

### ğŸ¤– æœºå™¨äººé›†æˆæ¥å£ (æ¨è)

**åŠŸèƒ½**ï¼šæŸ¥è¯¢å¥—é¤ä¿¡æ¯å¹¶å¯é€‰æ‹©æ€§å‘é€åˆ°é’‰é’‰æˆ–Telegram

```http
POST /api/bot
Content-Type: application/json
```

#### è¯·æ±‚å‚æ•°

```json
{
  "phonenum": "199****1016",
  "password": "123456",
  "type": "compact",
  "send_type": "both",
  "chat_id": "@your_channel",
  "use_markdown": false
}
```

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `phonenum` | string | âœ… | æ‰‹æœºå·ç  |
| `password` | string | âœ… | æŸ¥è¯¢å¯†ç  |
| `type` | string | âŒ | æ•°æ®æ ¼å¼ï¼š`basic`/`enhanced`/`compact`(é»˜è®¤) |
| `send_type` | string | âŒ | å‘é€å¹³å°ï¼š`dingtalk`/`telegram`/`both` |
| `chat_id` | string | âŒ | TelegramèŠå¤©ID(è¦†ç›–ç¯å¢ƒå˜é‡) |
| `use_markdown` | boolean | âŒ | æ˜¯å¦ä½¿ç”¨Markdownæ ¼å¼(ä»…Telegram) |

#### æ•°æ®æ ¼å¼ç±»å‹

| ç±»å‹ | ç”¨é€” | è¾“å‡ºé•¿åº¦ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|----------|
| `compact` | ç´§å‡‘ç‰ˆ | ~4è¡Œ | é’‰é’‰/TGé€šçŸ¥ï¼Œæ—¥å¸¸ç›‘æ§ |
| `basic` | åŸºç¡€ç‰ˆ | ~15è¡Œ | å¸¸è§„æŸ¥è¯¢ï¼ŒåŒ…å«å…³é”®è¯¦æƒ… |
| `enhanced` | å¢å¼ºç‰ˆ | ~50è¡Œ | è¯¦ç»†åˆ†æï¼Œå®Œæ•´ä¿¡æ¯ |

#### å“åº”æ ¼å¼

```json
{
  "success": true,
  "data": "æ ¼å¼åŒ–çš„æŸ¥è¯¢ç»“æœ",
  "cached": false,
  "phonenum": "199****1016",
  "timestamp": "2024-01-01T12:00:00.000Z",
  "send_results": {
    "platform": "both",
    "results": [
      {
        "platform": "dingtalk",
        "success": true,
        "message": "é’‰é’‰æ¶ˆæ¯å‘é€æˆåŠŸ"
      },
      {
        "platform": "telegram",
        "success": true,
        "message": "Telegramæ¶ˆæ¯å‘é€æˆåŠŸ"
      }
    ],
    "total_sent": 2,
    "total_failed": 0
  }
}
```

### ğŸ“Š æ ¼å¼åŒ–æŸ¥è¯¢æ¥å£

**åŠŸèƒ½**ï¼šè·å–æ ¼å¼åŒ–çš„å¥—é¤ä¿¡æ¯ï¼Œæ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼

```http
POST /api/query
Content-Type: application/json
```

#### è¯·æ±‚å‚æ•°

```json
{
  "phonenum": "199****1016",
  "enhanced": true,
  "format": "formatted"
}
```

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `phonenum` | string | âœ… | æ‰‹æœºå·ç  |
| `enhanced` | boolean | âŒ | æ˜¯å¦å¢å¼ºæ¨¡å¼ |
| `format` | string | âŒ | è¾“å‡ºæ ¼å¼ï¼š`formatted`(é»˜è®¤)/`json` |

### ğŸ” è®¤è¯ç›¸å…³æ¥å£

#### ç”¨æˆ·ç™»å½•

```http
POST /api/login
Content-Type: application/json
```

```json
{
  "phonenum": "199****1016",
  "password": "123456"
}
```

#### ä¼šè¯ç®¡ç†

- `GET /api/session/stats` - ä¼šè¯ç»Ÿè®¡
- `GET /api/session/clean` - æ¸…ç†è¿‡æœŸä¼šè¯
- `GET /api/session/clear` - æ¸…é™¤æ‰€æœ‰ä¼šè¯

### ğŸ“‹ åŸå§‹APIæ¥å£

è¿™äº›æ¥å£ä¸Pythonç‰ˆæœ¬å…¼å®¹ï¼Œè¿”å›åŸå§‹JSONæ•°æ®ï¼š

- `POST /api/qryImportantData` - å¥—é¤è¯¦ç»†ä¿¡æ¯  
- `POST /api/userFluxPackage` - æµé‡åŒ…æŸ¥è¯¢
- `POST /api/qryShareUsage` - å…±äº«æµé‡æŸ¥è¯¢
- `POST /api/summary` - ç»¼åˆä¿¡æ¯æŸ¥è¯¢

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯1ï¼šæ—¥å¸¸ç›‘æ§è„šæœ¬

**éœ€æ±‚**ï¼šæ¯å¤©æ—©ä¸Š8ç‚¹è‡ªåŠ¨æŸ¥è¯¢å¹¶å‘é€åˆ°é’‰é’‰ç¾¤

```bash
#!/bin/bash
# telecom_daily_check.sh

API_URL="https://199.deno.dev/api/bot"
PHONE="199****1016"
PASSWORD="123456"

response=$(curl -s -X POST "$API_URL" \
  -H "Content-Type: application/json" \
  -d "{
    \"phonenum\": \"$PHONE\",
    \"password\": \"$PASSWORD\",
    \"type\": \"compact\",
    \"send_type\": \"dingtalk\"
  }")

echo "âœ… ç›‘æ§å®Œæˆ: $response"
```

**éƒ¨ç½²æ–¹å¼**ï¼š
```bash
# æ·»åŠ åˆ°crontab
0 8 * * * /path/to/telecom_daily_check.sh
```

### åœºæ™¯2ï¼šé’é¾™é¢æ¿é›†æˆ

**éœ€æ±‚**ï¼šåœ¨é’é¾™é¢æ¿ä¸­ç›‘æ§å¤šä¸ªæ‰‹æœºå·

```javascript
// telecom_multi_monitor.js
const axios = require('axios');

const phones = [
  { num: "199****1016", pwd: "123456", name: "ä¸»å·" },
  { num: "138****5678", pwd: "234567", name: "å‰¯å·" }
];

async function checkAllPhones() {
  for (const phone of phones) {
    try {
      const response = await axios.post('https://199.deno.dev/api/bot', {
        phonenum: phone.num,
        password: phone.pwd,
        type: 'compact',
        send_type: 'telegram'
      });
      
      if (response.data.success) {
        console.log(`âœ… ${phone.name} ç›‘æ§æˆåŠŸ`);
      } else {
        console.error(`âŒ ${phone.name} ç›‘æ§å¤±è´¥: ${response.data.error}`);
      }
    } catch (error) {
      console.error(`âŒ ${phone.name} è¯·æ±‚å¼‚å¸¸: ${error.message}`);
    }
    
    // é¿å…é¢‘ç¹è¯·æ±‚
    await new Promise(resolve => setTimeout(resolve, 2000));
  }
}

checkAllPhones();
```

### åœºæ™¯3ï¼šGitHub Actions è‡ªåŠ¨åŒ–

**éœ€æ±‚**ï¼šæ¯å¤©æ£€æŸ¥æµé‡ä½¿ç”¨æƒ…å†µï¼Œè¶…è¿‡80%æ—¶è‡ªåŠ¨é€šçŸ¥

```yaml
# .github/workflows/telecom-monitor.yml
name: Telecom Monitor
on:
  schedule:
    - cron: '0 9,18 * * *'  # æ¯å¤©9ç‚¹å’Œ18ç‚¹

jobs:
  monitor:
    runs-on: ubuntu-latest
    steps:
      - name: Check Telecom Usage
        run: |
          response=$(curl -s -X POST https://199.deno.dev/api/bot \
            -H "Content-Type: application/json" \
            -d '{
              "phonenum": "${{ secrets.TELECOM_PHONE }}",
              "password": "${{ secrets.TELECOM_PASSWORD }}",
              "type": "basic",
              "send_type": "telegram"
            }')
          
          echo "Monitor result: $response"
```

### åœºæ™¯4ï¼šHome Assistant é›†æˆ

**éœ€æ±‚**ï¼šåœ¨æ™ºèƒ½å®¶å±…ç³»ç»Ÿä¸­æ˜¾ç¤ºå¥—é¤ä¿¡æ¯

```yaml
# configuration.yaml
sensor:
  - platform: rest
    name: "ç”µä¿¡å¥—é¤ä½™é¢"
    resource: "https://199.deno.dev/api/bot"
    method: POST
    headers:
      Content-Type: "application/json"
    payload: |
      {
        "phonenum": "199****1016",
        "password": "123456",
        "type": "compact"
      }
    value_template: "{{ value_json.data | regex_findall('ä½™é¢: Â¥(\\d+\\.\\d+)') | first }}"
    unit_of_measurement: "Â¥"
    scan_interval: 3600
```

### åœºæ™¯5ï¼šä¼ä¸šæ‰¹é‡ç›‘æ§

**éœ€æ±‚**ï¼šç›‘æ§å…¬å¸æ‰€æœ‰æ‰‹æœºå·ï¼Œç”Ÿæˆä½¿ç”¨æŠ¥å‘Š

```python
# enterprise_monitor.py
import requests
import json
import pandas as pd
from datetime import datetime

def monitor_enterprise_phones():
    phones = [
        {"dept": "é”€å”®éƒ¨", "phone": "199****1001", "password": "123456"},
        {"dept": "æŠ€æœ¯éƒ¨", "phone": "199****1002", "password": "234567"},
        {"dept": "å¸‚åœºéƒ¨", "phone": "199****1003", "password": "345678"},
    ]
    
    results = []
    
    for phone_info in phones:
        try:
            response = requests.post('https://199.deno.dev/api/bot', json={
                "phonenum": phone_info["phone"],
                "password": phone_info["password"],
                "type": "basic"
            })
            
            if response.json()["success"]:
                data = response.json()["data"]
                # è§£ææ•°æ®å¹¶æ·»åŠ åˆ°ç»“æœä¸­
                results.append({
                    "éƒ¨é—¨": phone_info["dept"],
                    "æ‰‹æœºå·": phone_info["phone"],
                    "æŸ¥è¯¢æ—¶é—´": datetime.now(),
                    "çŠ¶æ€": "æˆåŠŸ",
                    "è¯¦æƒ…": data
                })
            else:
                results.append({
                    "éƒ¨é—¨": phone_info["dept"],
                    "æ‰‹æœºå·": phone_info["phone"],
                    "æŸ¥è¯¢æ—¶é—´": datetime.now(),
                    "çŠ¶æ€": "å¤±è´¥",
                    "è¯¦æƒ…": response.json()["error"]
                })
                
        except Exception as e:
            results.append({
                "éƒ¨é—¨": phone_info["dept"],
                "æ‰‹æœºå·": phone_info["phone"],
                "æŸ¥è¯¢æ—¶é—´": datetime.now(),
                "çŠ¶æ€": "å¼‚å¸¸",
                "è¯¦æƒ…": str(e)
            })
    
    # ç”ŸæˆæŠ¥å‘Š
    df = pd.DataFrame(results)
    df.to_excel(f"telecom_report_{datetime.now().strftime('%Y%m%d')}.xlsx", index=False)
    print("âœ… ä¼ä¸šç›‘æ§æŠ¥å‘Šå·²ç”Ÿæˆ")

if __name__ == "__main__":
    monitor_enterprise_phones()
```

## âš™ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥

```bash
# è®¾ç½®ä¸åŒçš„ç¼“å­˜æ—¶é—´
CACHE_TIME=300    # 5åˆ†é’Ÿç¼“å­˜
CACHE_TIME=1800   # 30åˆ†é’Ÿç¼“å­˜  
CACHE_TIME=3600   # 1å°æ—¶ç¼“å­˜
```

### å¤šAPIæºé…ç½®

```bash
# é…ç½®å¤‡ç”¨APIæº
API_BASE=https://backup-api.example.com
```

### å®‰å…¨å¢å¼ºé…ç½®

```bash
# è®¾ç½®è®¿é—®ç™½åå•
WHITELIST_NUM=admin,special_user

# è®¾ç½®å¼ºå¯†ç 
WEB_PASSWORD=ComplexPassword123!
```

### é’‰é’‰æœºå™¨äººé«˜çº§é…ç½®

åˆ›å»ºå…³é”®è¯å‹æœºå™¨äººï¼š

1. **åˆ›å»ºæœºå™¨äºº**
   - è¿›å…¥é’‰é’‰ç¾¤ â†’ ç¾¤è®¾ç½® â†’ æœºå™¨äºº â†’ æ·»åŠ æœºå™¨äºº
   - é€‰æ‹©"è‡ªå®šä¹‰æœºå™¨äºº"
   - è®¾ç½®å…³é”®è¯ï¼š`ç”µä¿¡`ã€`å¥—é¤`ã€`æµé‡`

2. **è·å–Webhook**
   ```
   https://oapi.dingtalk.com/robot/send?access_token=YOUR_TOKEN
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   DINGTALK_WEBHOOK=https://oapi.dingtalk.com/robot/send?access_token=YOUR_TOKEN
   ```

### Telegram Bot é«˜çº§é…ç½®

1. **åˆ›å»ºBot**
   - ä¸ @BotFather å¯¹è¯
   - å‘é€ `/newbot`
   - è·å– Bot Token

2. **è·å–Chat ID**
   ```bash
   # æ–¹æ³•1ï¼šé€šè¿‡APIè·å–
   curl https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
   
   # æ–¹æ³•2ï¼šæ·»åŠ  @userinfobot åˆ°ç¾¤ç»„
   ```

3. **é…ç½®é¢‘é“å‘é€**
   ```bash
   TELEGRAM_BOT_TOKEN=1234567890:ABCDefGhiJklMnoPqrStUvWxYz
   TELEGRAM_CHAT_ID=@your_channel  # å…¬å¼€é¢‘é“
   # æˆ–
   TELEGRAM_CHAT_ID=-1001234567890  # ç§æœ‰ç¾¤ç»„
   ```

### æ€§èƒ½ä¼˜åŒ–é…ç½®

```bash
# è°ƒæ•´å¹¶å‘æ•°
MAX_CONCURRENT=5

# è°ƒæ•´è¶…æ—¶æ—¶é—´  
REQUEST_TIMEOUT=30000

# å¯ç”¨å‹ç¼©
ENABLE_COMPRESSION=true
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. éƒ¨ç½²ç›¸å…³

**é—®é¢˜**ï¼šéƒ¨ç½²åè®¿é—®404
```bash
# æ£€æŸ¥å…¥å£æ–‡ä»¶è®¾ç½®
âœ… ç¡®è®¤å…¥å£æ–‡ä»¶ä¸º main.ts
âœ… æ£€æŸ¥GitHubä»“åº“æ–‡ä»¶ç»“æ„
âœ… æŸ¥çœ‹Deno Deployæ„å»ºæ—¥å¿—
```

**é—®é¢˜**ï¼šç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
âœ… ç¡®è®¤å˜é‡åæ‹¼å†™æ­£ç¡®
âœ… æ£€æŸ¥æ˜¯å¦ä¿å­˜å¹¶é‡æ–°éƒ¨ç½²
âœ… é€šè¿‡ /status ç«¯ç‚¹éªŒè¯é…ç½®
```

#### 2. æŸ¥è¯¢ç›¸å…³

**é—®é¢˜**ï¼šæ‰‹æœºå·æˆ–å¯†ç é”™è¯¯
```bash
# éªŒè¯æ­¥éª¤
1. ç¡®è®¤æ‰‹æœºå·ä¸º11ä½æ•°å­—
2. ç¡®è®¤å¯†ç ä¸º6ä½æ•°å­—  
3. æ‰‹æœºå·ä¸å¯†ç æ•°é‡ä¸€ä¸€å¯¹åº”
4. æµ‹è¯•ç™»å½•ç”µä¿¡å®˜ç½‘éªŒè¯
```

**é—®é¢˜**ï¼šæŸ¥è¯¢è¶…æ—¶æˆ–å¤±è´¥
```bash
# æ’æŸ¥æ­¥éª¤
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. å°è¯•å¼ºåˆ¶åˆ·æ–° (?refresh=1)
3. æ¸…é™¤ç¼“å­˜ (/clear-cache)
4. æ£€æŸ¥APIæºçŠ¶æ€
```

#### 3. é€šçŸ¥ç›¸å…³

**é—®é¢˜**ï¼šé’‰é’‰é€šçŸ¥å‘é€å¤±è´¥
```bash
# æ£€æŸ¥é¡¹ç›®
âœ… Webhookåœ°å€æ˜¯å¦æ­£ç¡®
âœ… å…³é”®è¯æ˜¯å¦è®¾ç½®å¹¶åŒ¹é…
âœ… ç¾¤æœºå™¨äººæ˜¯å¦è¢«ç§»é™¤
âœ… æ¶ˆæ¯å†…å®¹æ˜¯å¦ç¬¦åˆæ ¼å¼è¦æ±‚
```

**é—®é¢˜**ï¼šTelegramé€šçŸ¥å‘é€å¤±è´¥
```bash
# æ£€æŸ¥é¡¹ç›®
âœ… Bot Tokenæ˜¯å¦æœ‰æ•ˆ
âœ… Chat IDæ˜¯å¦æ­£ç¡®
âœ… Botæ˜¯å¦è¢«æ·»åŠ åˆ°ç¾¤ç»„/é¢‘é“
âœ… Botæ˜¯å¦æœ‰å‘é€æƒé™
```

#### 4. æ€§èƒ½ç›¸å…³

**é—®é¢˜**ï¼šå“åº”ç¼“æ…¢
```bash
# ä¼˜åŒ–å»ºè®®
1. å¯ç”¨ç¼“å­˜ï¼ˆé»˜è®¤å·²å¯ç”¨ï¼‰
2. å‡å°‘å¹¶å‘æŸ¥è¯¢æ•°é‡
3. ä½¿ç”¨compactæ ¼å¼å‡å°‘æ•°æ®é‡
4. é€‰æ‹©è·ç¦»è¾ƒè¿‘çš„APIæº
```

### è°ƒè¯•å·¥å…·

#### 1. çŠ¶æ€æ£€æŸ¥
```bash
curl https://your-domain.deno.dev/status
```

#### 2. ç¼“å­˜ç®¡ç†
```bash
# æ¸…é™¤æ‰€æœ‰ç¼“å­˜
curl -X POST https://your-domain.deno.dev/clear-cache

# å¼ºåˆ¶åˆ·æ–°æŸ¥è¯¢
curl "https://your-domain.deno.dev/query?refresh=1"
```

#### 3. æ—¥å¿—æŸ¥çœ‹
```bash
# Deno Deployæ§åˆ¶å°æŸ¥çœ‹å®æ—¶æ—¥å¿—
# å…³æ³¨ä»¥ä¸‹å…³é”®è¯ï¼š
# - âŒ é”™è¯¯æ ‡è¯†  
# - âš ï¸ è­¦å‘Šæ ‡è¯†
# - âœ… æˆåŠŸæ ‡è¯†
```

### è”ç³»æ”¯æŒ

å¦‚æœé‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜ï¼š

1. **GitHub Issues** - [æäº¤é—®é¢˜](https://github.com/your-username/telecom-formatter/issues)
2. **åŠŸèƒ½å»ºè®®** - [æäº¤å»ºè®®](https://github.com/your-username/telecom-formatter/discussions)
3. **å®‰å…¨é—®é¢˜** - å‘é€é‚®ä»¶åˆ°å®‰å…¨é‚®ç®±

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æº - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Pull Request å’Œ Issueï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## â­ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ç»™ä¸€ä¸ª Star â­

---

<div align="center">

**[â¬† è¿”å›é¡¶éƒ¨](#ç”µä¿¡å¥—é¤æŸ¥è¯¢æ ¼å¼åŒ–æœåŠ¡-v20)**

Made with â¤ï¸ by [Your Name](https://github.com/your-username)

</div> 